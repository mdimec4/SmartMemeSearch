<Window x:Class="SmartMemeSearch.Wpf.Views.FolderManagerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Manage Meme Folders"
        Background="#F3F3F3"
        SizeToContent="WidthAndHeight"
        WindowStartupLocation="CenterOwner"
        ResizeMode="NoResize"
        FontFamily="Segoe UI Variable"
        Padding="20">

    <Window.Resources>

        <!-- Base colors -->
        <SolidColorBrush x:Key="Win11Background" Color="#F3F3F3"/>
        <SolidColorBrush x:Key="Win11Card" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="Win11Border" Color="#D0D0D0"/>
        <SolidColorBrush x:Key="Win11Button" Color="#E9E9E9"/>
        <SolidColorBrush x:Key="Win11ButtonHover" Color="#DDDDDD"/>
        <SolidColorBrush x:Key="Win11Text" Color="#202020"/>

        <!-- Modern Button -->
        <Style TargetType="Button">
            <Setter Property="FontFamily" Value="Segoe UI Variable"/>
            <Setter Property="Foreground" Value="{StaticResource Win11Text}"/>
            <Setter Property="Background" Value="{StaticResource Win11Button}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Win11Border}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,6"/>
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="root"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="root"
                                        Property="Background"
                                        Value="{StaticResource Win11ButtonHover}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="root"
                                        Property="Background"
                                        Value="#CFCFCF"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- List item card style -->
        <Style TargetType="ListBoxItem">
            <Setter Property="Margin" Value="4"/>
            <Setter Property="Padding" Value="6"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ListBoxItem">
                        <Border x:Name="root"
                                Background="{StaticResource Win11Card}"
                                CornerRadius="10"
                                BorderBrush="{StaticResource Win11Border}"
                                BorderThickness="1"
                                Padding="6"
                                SnapsToDevicePixels="True">
                            <ContentPresenter/>
                        </Border>

                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="root" Property="Background" Value="#F8F8F8"/>
                                <Setter TargetName="root" Property="BorderBrush" Value="#C5C5C5"/>
                                <Setter TargetName="root" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="#22000000"
                                                          BlurRadius="10"
                                                          ShadowDepth="2"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>

                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="root" Property="Background" Value="#D0E6FF"/>
                                <Setter TargetName="root" Property="BorderBrush" Value="#4A90E2"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </Window.Resources>


    <!-- Content -->
    <StackPanel VerticalAlignment="Top" Width="420">

        <!-- Folder list -->
        <ListBox x:Name="FolderList"
                 ItemsSource="{Binding Folders}"
                 BorderThickness="0"
                 Margin="0,0,0,20">

            <ListBox.ItemTemplate>
                <DataTemplate>
                    <DockPanel LastChildFill="False" Margin="4,0">
                        <TextBlock Text="{Binding}"
                                   Width="300"
                                   VerticalAlignment="Center"
                                   TextTrimming="CharacterEllipsis"/>

                        <Button Content="Remove"
                                Width="80"
                                Tag="{Binding}"
                                Click="Remove_Click"/>
                    </DockPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>

        </ListBox>

        <!-- Add folder button -->
        <Button Content="Add Folder"
                Width="140"
                HorizontalAlignment="Left"
                Click="Add_Click"
                Margin="0,0,0,20"/>

        <!-- OK / Cancel -->
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Cancel"
                    Width="80"
                    Click="Cancel_Click"/>
            <Button Content="OK"
                    Width="80"
                    Click="Ok_Click"/>
        </StackPanel>

    </StackPanel>

</Window>
